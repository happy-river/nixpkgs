From 823ddffb80729f400415a14ae18179f12e3b2c70 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Milan=20P=C3=A4ssler?= <me@pbb.lc>
Date: Tue, 11 Jun 2019 00:08:13 +0200
Subject: [PATCH] changes for nix packaging

---
 Gemfile      | 2 +-
 Gemfile.lock | 1 +
 package.json | 3 ++-
 yarn.lock    | 4 ++--
 4 files changed, 6 insertions(+), 4 deletions(-)

diff --git a/Gemfile b/Gemfile
index 4fd981f75..d9ba11dca 100644
--- a/Gemfile
+++ b/Gemfile
@@ -52,7 +52,7 @@ gem 'redis-namespace', '~> 1.5'
 gem 'htmlentities', '~> 4.3'
 gem 'http', '~> 3.3'
 gem 'http_accept_language', '~> 2.1'
-gem 'http_parser.rb', '~> 0.6', git: 'https://github.com/tmm1/http_parser.rb', ref: '54b17ba8c7d8d20a16dfc65d1775241833219cf2'
+gem 'http_parser.rb', '~> 0.6', git: 'https://github.com/tmm1/http_parser.rb', ref: '54b17ba8c7d8d20a16dfc65d1775241833219cf2', submodules: true
 gem 'httplog', '~> 1.3'
 gem 'idn-ruby', require: 'idn'
 gem 'kaminari', '~> 1.1'
diff --git a/Gemfile.lock b/Gemfile.lock
index d8a68d8c9..afd3cd348 100644
--- a/Gemfile.lock
+++ b/Gemfile.lock
@@ -9,6 +9,7 @@ GIT
   remote: https://github.com/tmm1/http_parser.rb
   revision: 54b17ba8c7d8d20a16dfc65d1775241833219cf2
   ref: 54b17ba8c7d8d20a16dfc65d1775241833219cf2
+  submodules: true
   specs:
     http_parser.rb (0.6.1)
 
diff --git a/package.json b/package.json
index 26ff64851..8efe15884 100644
--- a/package.json
+++ b/package.json
@@ -1,6 +1,7 @@
 {
   "name": "mastodon",
   "license": "AGPL-3.0-or-later",
+	"version": "2.9.0",
   "engines": {
     "node": ">=8.12 <12"
   },
@@ -89,7 +90,7 @@
     "cssnano": "^4.1.10",
     "detect-passive-events": "^1.0.2",
     "dotenv": "^8.0.0",
-    "emoji-mart": "Gargron/emoji-mart#build",
+    "emoji-mart": "git+https://github.com/Gargron/emoji-mart#build",
     "es6-symbol": "^3.1.1",
     "escape-html": "^1.0.3",
     "exif-js": "^2.3.0",
diff --git a/yarn.lock b/yarn.lock
index c4740dabb..4b7127359 100644
--- a/yarn.lock
+++ b/yarn.lock
@@ -3346,9 +3346,9 @@ elliptic@^6.0.0:
     minimalistic-assert "^1.0.0"
     minimalistic-crypto-utils "^1.0.0"
 
-emoji-mart@Gargron/emoji-mart#build:
+"emoji-mart@git+https://github.com/Gargron/emoji-mart#build":
   version "2.6.2"
-  resolved "https://codeload.github.com/Gargron/emoji-mart/tar.gz/ff00dc470b5b2d9f145a6d6e977a54de5df2b4c9"
+  resolved "git+https://github.com/Gargron/emoji-mart#ff00dc470b5b2d9f145a6d6e977a54de5df2b4c9"
 
 emoji-regex@^7.0.2:
   version "7.0.3"
-- 
2.21.0

